function handleCommand(){alert("Clicked, checked = "+this.checked)}function reset(){for(var e=previousIds.length-1;e>=0;e--)parks.resetStyle(previousIds[e])}function query(){reset();var e=geometries[geometry.value];parks.query()[relationship.value](e).ids(function(e,r){previousIds=r;for(var t=r.length-1;t>=0;t--)parks.setFeatureStyle(r[t],{color:"#70ca49",weight:2})})}var map=L.map("map").setView([41.25,-95.99],12);L.tileLayer("http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",{attribution:"Positron"}).addTo(map);var parks=L.esri.featureLayer({url:"https://gis.dogis.org/arcgis/rest/services/Parks/Parks_Outline/MapServer/0",style:function(){return{color:"#70ca49",weight:2}}}).addTo(map),playgrounds=L.esri.featureLayer({url:"https://gis.dogis.org/arcgis/rest/services/Parks/Parks_Asset_Collector_Project/FeatureServer/3",style:function(){return{color:"red",weight:2}}}).addTo(map),courts=L.esri.featureLayer({url:"https://gis.dogis.org/arcgis/rest/services/Parks/Parks_Asset_Collector_Project/FeatureServer/1",pointToLayer:function(e,r){return L.circleMarker(r,{radius:3,fillColor:"#ff7800",color:"#000",weight:1,opacity:1,fillOpacity:.8})}}).addTo(map),biketrails=L.esri.featureLayer({url:"https://gis.dogis.org/arcgis/rest/services/Bike_Trails_and_Routes/MapServer/3",style:function(){return{color:"black",weight:3}}}).addTo(map),popupTemplate="<h3>{NAME}</h3><br><small>Address: {FULLADDR}<small>";parks.bindPopup(function(e){return L.Util.template(popupTemplate,e.feature.properties)});var geometries={polygon:parks},relationship=document.getElementById("relationSelect"),geometry=document.getElementById("geometrySelect"),previousIds=[],legend=L.control({position:"bottomleft"});legend.onAdd=function(e){for(var r=L.DomUtil.create("div","info legend"),t=["Park","Playground","Play Structure"],a=["Park","Playground","Play Structure"],o=0;o<t.length;o++)r.innerHTML+=t[o]+" - "+a[o]+"</br>";return r},legend.addTo(map),L.control.locate().addTo(map),geometry.addEventListener("change",query),relationship.addEventListener("change",query),parks.once("load",function(){query()});